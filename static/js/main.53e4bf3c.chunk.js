(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{20:function(e,t,n){e.exports={form:"Signup_form__2AwUx",heading:"Signup_heading__2hlU8",label:"Signup_label__IzbnX",input:"Signup_input__1rJBp",button:"Signup_button__1rJIF"}},23:function(e,t,n){e.exports={form:"Login_form__RnYgG",heading:"Login_heading__3TMRp",label:"Login_label__26tIG",input:"Login_input__3dIvy",button:"Login_button__ADmdZ"}},24:function(e,t,n){e.exports={form:"InputForm_form__19Zkp",label:"InputForm_label__ffqu2",input:"InputForm_input__18_QU",btn:"InputForm_btn__-Yutt"}},26:function(e,t,n){e.exports={container:"Navigation_container___wsPy",link:"Navigation_link__12o2K",link_active:"Navigation_link_active__fzNjR"}},27:function(e,t,n){e.exports={container:"LoginMenu_container__3mwE7",link:"LoginMenu_link__2SnSi",link_active:"LoginMenu_link_active__2zJq4"}},29:function(e,t,n){e.exports={list:"Phonebook_list__uKNNQ",item:"Phonebook_item__1FrRV",close:"Phonebook_close__Ru4Oc"}},31:function(e,t,n){e.exports={container:"UserMenu_container__GgYhE",avatar:"UserMenu_avatar__2e7Jj",name:"UserMenu_name__3e8KV",button:"UserMenu_button__3mTE-"}},37:function(e,t,n){e.exports={wrapper:"Filter_wrapper__IqOjQ",label:"Filter_label__3DcZT",input:"Filter_input__2DoVp"}},41:function(e,t,n){e.exports={section:"Container_section__1Tm7J",heading:"Container_heading__2ErCF"}},53:function(e,t,n){e.exports={appbar:"Appbar_appbar__3cIge"}},54:function(e,t,n){e.exports={heading:"HomeView_heading__2sXaQ"}},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r,a,c,o,u,s,i=n(0),l=n.n(i),b=n(32),j=n.n(b),p=n(14),h=n(5),f=n(50),m=n(35),O=n(3),d=n(22),g=n(51),_=n.n(g),x=n(2),v=n(7),C=Object(O.b)("contacts/fetchContactsRequest"),k=Object(O.b)("contacts/fetchContactsSuccess"),N=Object(O.b)("contacts/fetchContactsError"),y=Object(O.b)("contacts/addContactRequest"),S=Object(O.b)("contacts/addContactSuccess"),w=Object(O.b)("contacts/addContactError"),E=Object(O.b)("contacts/deleteContactRequest"),U=Object(O.b)("contacts/deleteContactSuccess"),R=Object(O.b)("contacts/deleteContactError"),L=Object(O.b)("contacts/changeFilter"),A=Object(O.c)([],(r={},Object(x.a)(r,k,(function(e,t){return t.payload})),Object(x.a)(r,S,(function(e,t){var n=t.payload;return[].concat(Object(m.a)(e),[n])})),Object(x.a)(r,U,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),F=Object(O.c)(!1,(a={},Object(x.a)(a,C,(function(){return!0})),Object(x.a)(a,k,(function(){return!1})),Object(x.a)(a,N,(function(){return!1})),Object(x.a)(a,y,(function(){return!0})),Object(x.a)(a,S,(function(){return!1})),Object(x.a)(a,w,(function(){return!1})),Object(x.a)(a,E,(function(){return!0})),Object(x.a)(a,U,(function(){return!1})),Object(x.a)(a,R,(function(){return!1})),a)),q=Object(O.c)("",Object(x.a)({},L,(function(e,t){return t.payload}))),T=Object(O.c)(null,{}),I=Object(v.b)({contacts:A,filter:q,loading:F,error:T}),M={registerRequest:Object(O.b)("auth/registerRequest"),registerSuccess:Object(O.b)("auth/registerSuccess"),registerError:Object(O.b)("auth/registerError"),loginRequest:Object(O.b)("auth/loginRequest"),loginSuccess:Object(O.b)("auth/loginSuccess"),loginError:Object(O.b)("auth/loginError"),logoutRequest:Object(O.b)("auth/logoutRequest"),logoutSuccess:Object(O.b)("auth/logoutSuccess"),logoutError:Object(O.b)("auth/logoutError"),getCurrentUserRequest:Object(O.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(O.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(O.b)("auth/getCurrentUserError")},P={name:null,email:null},D=Object(O.c)(P,(c={},Object(x.a)(c,M.registerSuccess,(function(e,t){return t.payload.user})),Object(x.a)(c,M.loginSuccess,(function(e,t){return t.payload.user})),Object(x.a)(c,M.logoutSuccess,(function(){return P})),Object(x.a)(c,M.getCurrentUserSuccess,(function(e,t){return t.payload})),c)),J=Object(O.c)(null,(o={},Object(x.a)(o,M.registerSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,M.loginSuccess,(function(e,t){return t.payload.token})),Object(x.a)(o,M.logoutSuccess,(function(){return null})),o)),z=Object(O.c)(null,(u={},Object(x.a)(u,M.registerError,(function(e,t){return t.payload})),Object(x.a)(u,M.loginError,(function(e,t){return t.payload})),Object(x.a)(u,M.logoutError,(function(e,t){return t.payload})),Object(x.a)(u,M.getCurrentUserError,(function(e,t){return t.payload})),u)),G=Object(O.c)(!1,(s={},Object(x.a)(s,M.registerSuccess,(function(){return!0})),Object(x.a)(s,M.loginSuccess,(function(){return!0})),Object(x.a)(s,M.getCurrentUserSuccess,(function(){return!0})),Object(x.a)(s,M.registerError,(function(){return!1})),Object(x.a)(s,M.loginError,(function(){return!1})),Object(x.a)(s,M.getCurrentUserError,(function(){return!1})),Object(x.a)(s,M.logoutSuccess,(function(){return!1})),s)),Q=Object(v.b)({user:D,token:J,isAuthenticated:G,error:z}),V=Object(m.a)(Object(O.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),B={key:"auth",storage:_.a,whitelist:["token"]},K=Object(O.a)({reducer:{auth:Object(d.g)(B,Q),contacts:I},middleware:V,devTools:!1}),Y={store:K,persistor:Object(d.h)(K)},Z=n(15),H=n(16),X=n(18),W=n(17),$=n(6),ee=n(26),te=n.n(ee),ne=n(1),re=function(){return Object(ne.jsxs)("div",{className:te.a.container,children:[Object(ne.jsx)(p.b,{className:te.a.link,activeClassName:te.a.link_active,exact:!0,to:"/",children:"Home"}),Object(ne.jsx)(p.b,{className:te.a.link,activeClassName:te.a.link_active,to:"/phonebook",children:"Phonebook"})]})},ae=n(27),ce=n.n(ae),oe=function(){return Object(ne.jsxs)("div",{className:ce.a.container,children:[Object(ne.jsx)(p.b,{className:ce.a.link,activeClassName:ce.a.link_active,to:"/signup",children:"Signup"}),Object(ne.jsx)(p.b,{className:ce.a.link,activeClassName:ce.a.link_active,to:"/login",children:"Login"})]})},ue=function(e){return e.auth.isAuthenticated},se=function(e){return e.auth.user.name},ie=n(21),le=n.n(ie),be=n(30),je=n(13),pe=n.n(je);pe.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var he=function(e){pe.a.defaults.headers.common.Authorization="Bearer ".concat(e)},fe=function(){pe.a.defaults.headers.common.Authorization=""},me={register:function(e){return function(){var t=Object(be.a)(le.a.mark((function t(n){var r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M.registerRequest()),t.prev=1,t.next=4,pe.a.post("/users/signup",e);case 4:r=t.sent,he(r.data.token),n(M.registerSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(M.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},login:function(e){return function(){var t=Object(be.a)(le.a.mark((function t(n){var r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(M.loginRequest()),t.prev=1,t.next=4,pe.a.post("/users/login",e);case 4:r=t.sent,he(r.data.token),n(M.loginSuccess(r.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(M.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(be.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M.logoutRequest()),e.prev=1,e.next=4,pe.a.post("users/logout");case 4:fe(),t(M.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(M.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(be.a)(le.a.mark((function e(t,n){var r,a,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return he(a),t(M.getCurrentUserRequest()),e.prev=5,e.next=8,pe.a.get("users/current");case 8:c=e.sent,t(M.getCurrentUserSuccess(c.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(M.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},Oe=n(31),de=n.n(Oe),ge=Object(h.b)((function(e){return{userName:se(e)}}),(function(e){return{onLogout:function(){return e(me.logout())}}}))((function(e){var t=e.userName,n=e.onLogout;return Object(ne.jsxs)("div",{className:de.a.container,children:[Object(ne.jsx)("span",{className:de.a.avatar,children:t.slice(0,1)}),Object(ne.jsx)("span",{className:de.a.name,children:t}),Object(ne.jsx)("button",{className:de.a.button,type:"button",onClick:n,children:"Log Out"})]})})),_e=n(53),xe=n.n(_e),ve=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.isAuthenticated;return Object(ne.jsxs)("div",{className:xe.a.appbar,children:[Object(ne.jsx)(re,{}),t?Object(ne.jsx)(ge,{}):Object(ne.jsx)(oe,{})]})})),Ce=n(23),ke=n.n(Ce),Ne=function(e){Object(X.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(Z.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.onChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state)},e}return Object(H.a)(n,[{key:"render",value:function(){return Object(ne.jsxs)("form",{className:ke.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("h2",{className:ke.a.heading,children:"Log in"}),Object(ne.jsxs)("label",{className:ke.a.label,children:["Email",Object(ne.jsx)("input",{className:ke.a.input,type:"email",name:"email",autoComplete:"off",placeholder:"Enter your e-mail",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:ke.a.label,children:["Password",Object(ne.jsx)("input",{className:ke.a.input,type:"password",name:"password",autoComplete:"off",placeholder:"Enter your password",onChange:this.onChange})]}),Object(ne.jsx)("button",{type:"submit",className:ke.a.button,children:"Sign in"})]})}}]),n}(i.Component),ye=Object(h.b)(null,(function(e){return{onSubmit:function(t){return e(me.login(t))}}}))(Ne),Se=n(54),we=n.n(Se),Ee=function(){return Object(ne.jsx)("h1",{className:we.a.heading,children:"\u041f\u043e \u043f\u043b\u0430\u043d\u0443 \u0434\u043e\u043b\u0436\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c..."})},Ue=n(20),Re=n.n(Ue),Le=function(e){Object(X.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(Z.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",email:"",password:""},e.onChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state)},e}return Object(H.a)(n,[{key:"render",value:function(){return Object(ne.jsxs)("form",{className:Re.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("h2",{className:Re.a.heading,children:"Sign up"}),Object(ne.jsxs)("label",{className:Re.a.label,children:["Name",Object(ne.jsx)("input",{className:Re.a.input,type:"text",name:"name",autoComplete:"off",placeholder:"Enter your name",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:Re.a.label,children:["Email",Object(ne.jsx)("input",{className:Re.a.input,type:"email",name:"email",autoComplete:"off",placeholder:"Enter your e-mail",onChange:this.onChange})]}),Object(ne.jsxs)("label",{className:Re.a.label,children:["Password",Object(ne.jsx)("input",{className:Re.a.input,type:"password",name:"password",autoComplete:"off",placeholder:"Enter your password",onChange:this.onChange})]}),Object(ne.jsx)("button",{type:"submit",className:Re.a.button,children:"Register"})]})}}]),n}(i.Component),Ae=Object(h.b)(null,(function(e){return{onSubmit:function(t){return e(me.register(t))}}}))(Le),Fe=n(34),qe=function(e){return e.contacts.loading},Te=function(e){return e.contacts.contacts},Ie=function(e){return e.contacts.filter},Me=Object(Fe.a)([Te,Ie],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}));pe.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var Pe=n(24),De=n.n(Pe),Je=function(e){Object(X.a)(n,e);var t=Object(W.a)(n);function n(){var e;Object(Z.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",number:""},e.handleChange=function(t){var n=t.currentTarget,r=n.name,a=n.value;e.setState(Object(x.a)({},r,a))},e.handleSubmit=function(t){t.preventDefault();var n=e.state.name,r=e.props,a=r.contacts,c=r.onSubmit;if(a.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("".concat(n," Already exists")),void e.reset();c(e.state),e.reset()},e.reset=function(){e.setState({name:"",number:""})},e}return Object(H.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return Object(ne.jsxs)("form",{className:De.a.form,onSubmit:this.handleSubmit,children:[Object(ne.jsx)("label",{className:De.a.label,htmlFor:"name",children:"Name"}),Object(ne.jsx)("input",{id:"name",type:"text",onChange:this.handleChange,className:De.a.input,name:"name",value:t,placeholder:"Name",autoComplete:"off",autoFocus:!0}),Object(ne.jsx)("label",{className:De.a.label,htmlFor:"number",children:"Number"}),Object(ne.jsx)("input",{id:"number",type:"text",onChange:this.handleChange,className:De.a.input,name:"number",value:n,placeholder:"Phone number",autoComplete:"off"}),Object(ne.jsx)("button",{type:"submit",className:De.a.btn,children:"Add contact"})]})}}]),n}(i.Component),ze=Object(h.b)((function(e){return{contacts:Te(e)}}),(function(e){return{onSubmit:function(t){var n=t.name,r=t.number;return e(function(e){var t=e.name,n=e.number;return function(e){var r={name:t,number:n};e(y()),pe.a.post("/contacts",r).then((function(t){var n=t.data;return e(S(n))})).catch((function(t){return e(w(t.message))}))}}({name:n,number:r}))}}}))(Je),Ge=n(37),Qe=n.n(Ge),Ve=function(e){var t=e.filter,n=e.onChange;return Object(ne.jsx)("div",{className:Qe.a.wrapper,children:Object(ne.jsxs)("label",{className:Qe.a.label,children:["Find by Name",Object(ne.jsx)("input",{className:Qe.a.input,type:"text",value:t,onChange:n})]})})};Ve.defaultProps={filter:""};var Be=Object(h.b)((function(e){return{filter:Ie(e)}}),(function(e){return{onChange:function(t){return e(L(t.target.value))}}}))(Ve),Ke=n(19),Ye=n(29),Ze=n.n(Ye),He=Object(h.b)(null,(function(e){return{onDelete:function(t){return e((n=t,function(e){e(E()),pe.a.delete("/contacts/".concat(n)).then((function(){return e(U(n))})).catch((function(t){return e(R(t.message))}))}));var n}}}))((function(e){var t=e.name,n=e.number,r=e.id,a=e.onDelete;return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("span",{children:[t," : ",n]}),Object(ne.jsx)("button",{type:"button",className:Ze.a.close,onClick:function(){return a(r)},children:"+"})]})})),Xe=Object(h.b)((function(e){return{contacts:Me(e)}}))((function(e){var t=e.contacts;return Object(ne.jsx)(ne.Fragment,{children:t&&Object(ne.jsx)("ul",{className:Ze.a.list,children:t.map((function(e){return Object(ne.jsx)("li",{className:Ze.a.item,children:Object(ne.jsx)(He,Object(Ke.a)({},e))},e.id)}))})})})),We=n(41),$e=n.n(We),et=function(e){var t=e.title,n=e.children;return Object(ne.jsxs)("section",{className:$e.a.section,children:[Object(ne.jsx)("h2",{className:$e.a.heading,children:t}),n]})};et.defaultProps={title:""};var tt=et,nt=function(e){Object(X.a)(n,e);var t=Object(W.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(tt,{title:"Phonebook",children:Object(ne.jsx)(ze,{})}),Object(ne.jsxs)(tt,{title:"Contacts",children:[Object(ne.jsx)(Be,{}),this.props.isLoadingContacts&&Object(ne.jsx)("h2",{children:" Loading contacts..."}),Object(ne.jsx)(Xe,{})]})]})}}]),n}(i.Component),rt=Object(h.b)((function(e){return{isLoadingContacts:qe(e)}}),(function(e){return{fetchContacts:function(){return e((function(e){e(C()),pe.a.get("/contacts").then((function(t){var n=t.data;return e(k(n))})).catch((function(t){return e(N(t.message))}))}))}}}))(nt),at=n(36),ct=["component","isAuthenticated","redirectTo"],ot=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,a=Object(at.a)(e,ct);return Object(ne.jsx)($.b,Object(Ke.a)(Object(Ke.a)({},a),{},{render:function(e){return n&&a.restricted?Object(ne.jsx)($.a,{to:r}):Object(ne.jsx)(t,Object(Ke.a)({},e))}}))})),ut=["component","isAuthenticated","redirectTo"],st=Object(h.b)((function(e){return{isAuthenticated:ue(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,r=e.redirectTo,a=Object(at.a)(e,ut);return Object(ne.jsx)($.b,Object(Ke.a)(Object(Ke.a)({},a),{},{render:function(e){return n?Object(ne.jsx)(t,Object(Ke.a)({},e)):Object(ne.jsx)($.a,{to:r})}}))})),it=function(e){Object(X.a)(n,e);var t=Object(W.a)(n);function n(){return Object(Z.a)(this,n),t.apply(this,arguments)}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(ve,{}),Object(ne.jsxs)($.d,{children:[Object(ne.jsx)(ot,{exact:!0,path:"/",component:Ee}),Object(ne.jsx)(ot,{path:"/signup",restricted:!0,redirectTo:"/phonebook",component:Ae}),Object(ne.jsx)(ot,{path:"/login",restricted:!0,redirectTo:"/phonebook",component:ye}),Object(ne.jsx)(st,{path:"/phonebook",redirectTo:"/login",component:rt})]})]})}}]),n}(i.Component),lt={onGetCurrentUser:me.getCurrentUser},bt=Object(h.b)(null,lt)(it);n(86);j.a.render(Object(ne.jsx)(l.a.StrictMode,{children:Object(ne.jsx)(h.a,{store:Y.store,children:Object(ne.jsx)(f.a,{loading:null,persistor:Y.persistor,children:Object(ne.jsx)(p.a,{children:Object(ne.jsx)(bt,{})})})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.53e4bf3c.chunk.js.map